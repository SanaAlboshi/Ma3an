{% extends "main/base.html" %}
{% load static %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="container py-5">
    <h2 class="mb-4">My Profile</h2>

    {% if not edit_mode %}
        <!-- عرض البيانات -->
        <p><b>Username:</b> {{ user.username }}</p>
        <p><b>Email:</b> {{ user.email }}</p>
        <p><b>First name:</b> {{ user.first_name }}</p>
        <p><b>Last name:</b> {{ user.last_name }}</p>

        <hr>

        {% if user.role == 'traveler' %}
            {% include 'accounts/partials/traveler.html' %}
        {% elif user.role == 'agency' %}
            {% include 'accounts/partials/agency.html' %}
        {% elif user.role == 'tourGuide' %}
            {% include 'accounts/partials/tourGuide.html' %}
        {% endif %}

        <a href="?edit=1" class="btn btn-primary mt-3">Edit profile</a>

    {% else %}
        <!-- editing Info -->
        <form method="post">
            {% csrf_token %}

            <h4>Account info</h4>
            <div class="mb-3">
                <label class="form-label">Username</label>
                <input name="username" value="{{ user.username }}" class="form-control">
            </div>
            <div class="mb-3">
                <label class="form-label">Email</label>
                <input name="email" value="{{ user.email }}" class="form-control">
            </div>
            <div class="mb-3">
                <label class="form-label">First name</label>
                <input name="first_name" value="{{ user.first_name }}" class="form-control">
            </div>
            <div class="mb-3">
                <label class="form-label">Last name</label>
                <input name="last_name" value="{{ user.last_name }}" class="form-control">
            </div>

            <hr>

            {% if user.role == 'traveler' %}
                {% include 'accounts/partials/traveler_edit.html' %}
            {% elif user.role == 'agency' %}
                {% include 'accounts/partials/agency_edit.html' %}
            {% elif user.role == 'tourGuide' %}
                {% include 'accounts/partials/tourGuide_edit.html' %}
            {% endif %}

            <button type="submit" class="btn btn-success">Save</button>
            <a href="{% url 'accounts:profile_view' %}" class="btn btn-secondary">Cancel</a>
        </form>
    {% endif %}
</div>
{% endblock %}
