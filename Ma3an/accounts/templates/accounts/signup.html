{% extends "main/base.html" %}
{% load static %}

{% block content %}


<form class="register-form" method="post" action="{% url 'accounts:signup_view' %}">
    {% csrf_token %}

    <h2>Create Account</h2>

    <div class="role-selection">
        <label>
            <input type="radio" name="role" value="traveler" required onclick="toggleFields()">
            Traveler
        </label>

        <label>
            <input type="radio" name="role" value="agency" onclick="toggleFields()">
            Agency
        </label>
    </div>

    <!-- traveler fields -->
    <div id="traveler-fields" style="display:none;">
        <input type="email" placeholder="Email" name="email" required />
        <input type="text" placeholder="Username" name="username" required />
        <input type="text" placeholder="First Name" name="first_name" required />
        <input type="text" placeholder="Last Name" name="last_name" required />

        <input type="date" name="date_of_birth" required />

        <input type="text" name="phone_number" placeholder="Phone Number" required />

        <select name="gender" required>
            <option value="">Select Gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
        </select>

        <label for="id_nationality">Nationality:</label>
        <select name="nationality" id="id_nationality" required>
            <option value="">Select a country</option>
            {% for code, name in countries %}
                <option value="{{ code }}">{{ name }}</option>
            {% endfor %}
        </select>

        <input type="text" name="passport_number" placeholder="Passport Number" required />
        <input type="date" name="passport_expiry_date" required />
        <input type="password" name="password" placeholder="Password" required />
    </div>

    <!-- agency fields -->
    <div id="agency-fields" style="display:none;">
        <input type="email" name="email" placeholder="Official Email" required />
        <input type="text" name="username" placeholder="Username" required />
        <input type="text" name="first_name" placeholder="First Name" required />
        <input type="text" name="last_name" placeholder="Last Name" required />
        <input type="text" name="agency_name" placeholder="Agency Name" required />
        <input type="text" name="phone_number" placeholder="Phone Number" required />
        <input type="text" name="city" placeholder="City" required />
        <input type="text" name="commercial_license" placeholder="Commercial License" required />
        <input type="password" name="password" placeholder="Password" required />
    </div>

    <button type="submit">Sign Up</button>
</form>

<!-- <script>
function toggleFields() {
    const role = document.querySelector('input[name="role"]:checked').value;
    document.getElementById("traveler-fields").style.display = role === "traveler" ? "block" : "none";
    document.getElementById("agency-fields").style.display = role === "agency" ? "block" : "none";
}
</script> -->

<script>
    function toggleFields() {
    const checkedRole = document.querySelector('input[name="role"]:checked');
    if (!checkedRole) return;
    const role = checkedRole.value;
    document.getElementById("traveler-fields").style.display = role === "traveler" ? "block" : "none";
    document.getElementById("agency-fields").style.display = role === "agency" ? "block" : "none";
}

document.addEventListener("DOMContentLoaded", function() {
    toggleFields(); // يعرض الحقول الصحيحة إذا كان أي role محدد
});

</script>

{% endblock %}
